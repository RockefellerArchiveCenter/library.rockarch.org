{% capture object_id %}{{page.id}}{% endcapture %}
{% assign object = site.data.resource[object_id] %}

<h1>
  {{ object.title }}
</h1>

<!-- Demonstrates how to get subject data -->
<ul>
{% for subject in object.subjects %}
  {% capture subject_id %}{{ subject.ref | split: "/" | last }}{% endcapture %}
  {% assign obj = site.data.subject[subject_id] %}
  <li>{{obj.title}}</li>
{% endfor %}
</ul>

<!-- Demonstrates how to get top_container data -->
<ul>
{% for instance in object.instances %}
  {%- capture top_container_id -%}
    {{ instance.sub_container.top_container.ref | split: "/" | last }}
  {%- endcapture -%}
  {% assign obj = site.data.top_container[top_container_id] %}
  <li>{{obj.indicator}}</li>
{% endfor %}
</ul>

<!-- Demonstrates how to get agent data, which is a bit more complicated -->
<ul>
{% for agent in object.linked_agents %}
  {% capture agent_id %}{{ agent.ref | split: "/" | last }}{% endcapture %}
  {% if agent.ref contains "corporate_entities" %}
    {% assign agent_data = site.data.agent_corporate_entity[agent_id] %}
  {% elsif agent.ref contains "people" %}
    {% assign agent_data = site.data.agent_person[agent_id] %}
  {% endif %}
  <li>{{ agent_data.title }}</li>
{% endfor %}
</ul>
